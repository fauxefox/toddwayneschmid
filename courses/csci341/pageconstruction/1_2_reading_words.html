<h1>Reading words</h1>

<p>
    We arrived at the definition of automata by way of abstraction, letting go of the specifics of states of a Sokoban puzzle or the transitions corresponding to legal moves.
    Here is that definition one more time:
</p>

<div class="definition" id="automaton">
    <b>(Automaton)</b>
    An <i>automaton</i> \(\mathcal A = (Q, A, \delta, F)\) consists of the following data:
    <ul>
        <li>A set \(Q\) of <i>states</i>, called the <i>state space</i></li>
        <li>A set \(A\) of <i>input letters</i>, called the <i>input alphabet</i></li>
        <li>A set \(\delta \subseteq Q \times A \times Q\) of <i>transitions</i>, called the <i>transition relation</i></li>
        <li>A set \(F \subseteq Q\) of <i>final</i> (also called <i>accepting</i>) <i>states</i></li>
    </ul>
    Given states \(x_1,x_2 \in Q\) and an input letter \(a \in A\), we write \(x_1 \xrightarrow{a}_\delta x_2\) to mean that \((s_1, a, s_2) \in \delta\).
    Furthermore, given \(x \in Q\) and in input letter \(a \in A\), we define the set of <i>outgoing \(a\)-transitions from state \(x\)</i> by
    \[
        \delta(x, a) = \{y \in Q \mid x \xrightarrow{a}_\delta y\}
    \]
    In other words, \(y \in \delta(x, a)\) if and only if \(x \xrightarrow{a}_\delta y\).
</div>

<p>
    We talked briefly about "paths" through an automaton, which correspond to sequences of legal moves. 
    Paths are a very special kind of "run of a program", the general idea of which we return to today.
</p>

<p>
    The foundational intuitions you should keep in mind for the duration of the course are
    <ol>
        <li>An automaton is a machine that is capable of running one of several programs.</li>
        <li>A state in an automaton is a program.</li>
        <li>The runtime and output of a program is determined by the input given to the program.</li>
    </ol>    
    The piece of this that we are missing so far is 3, the idea of "input".
    For us, "input" is referring to a sequence of input letters, which you can think of as commands.
    In theoretical computer science, these are called <i>words</i>.
</p>

<div class="definition">
    <b>(Words)</b>
    Fix a set \(A\) of input letters. 
    A <i>word</i> (or <i>string</i>) <i>from \(A\)</i> is a finite sequence of input letters 
    \[
        a_0a_1a_2\dots a_{n-1}
    \]
    where \(a_i \in A\) for all \(i < n\).
    The number \(n\) in the word \(w = a_0a_1a_2\dots a_{n-1}\) is the <i>length</i> of \(w\) and written \(|w| = n\).
    
    <p>
        Taking \(n = 0\) in the above definition, we obtain the <i>empty word</i>, which is written \(\varepsilon\). 
        The empty word is the unique word of length \(0\).
    </p>
    <p>
        The set of all words from \(A\) is written with a superscripted star,
        \[
            A^* = \big\{a_0a_1a_2\dots a_{n-1} \mid \text{\(n \ge 0\) and \(a_i \in A\) for all \(i < n\)} \big\}
        \]
    </p>
</div>

<p>
    Words (also called strings) are an abstraction from sequences of instructions/legal actions/moves/and so on.
    For example, \(\Uparrow\Rightarrow\Rightarrow\Downarrow\) is a word from the familiar alphabet \(A = \{\Downarrow, \Leftarrow, \Uparrow, \Rightarrow\}\).
    Given an automaton \(\mathcal A\) and a word \(w \in A^*\), each state of \(\mathcal A\) can be "run against \(w\)" by exploring all of the transitions obtained from the sequence of actions in \(w\).
    In the context of automata theory, this is usually called <i>reading</i> the word.
</p>

<div class="definition">
    <b>(Reading a Word)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton, and let \(w = a_0a_1a_2\dots a_{n-1}\) be a word from \(A\).
    Given a state \(x \in Q\), \(x\) <i>reads \(w\) and stops at \(y\)</i> if there is a sequence of transitions 
    \[
        x \xrightarrow{a_0}_\delta x_1 \xrightarrow{a_1}_\delta x_2 \xrightarrow{a_2}_\delta x_3 \xrightarrow{a_3}_\delta \cdots \xrightarrow{a_{n-1}}_\delta y
    \]
    The set of all states such that \(x\) reads \(w\) and stops at \(y\) is denoted writing the word into \(\delta(x, \ \ )\) instead of a letter.
    \[
        \delta(x, w) = \big\{ y \in Q \mid \text{\(x\) reads \(w\) and stops at \(y\)} \big\}
    \]
</div>

<p>
    You want to imagine this as follows: write the word \(a_0a_1a_2\dots a_{n-1}\) from \(A\) on a strip of paper.
    This strip of paper is called the <i>tape</i>. 
    Put the head of your pencil above the first letter on the tape. 
    This marker indicating the currently-active part of the tape is called the <i>tape head</i>.
    <div class="figure">
        <img src="../imgs/automatontape.svg" />
    </div>
    Finally, place a marker on the state you are reading from, in this case \(x\).
    This is called an <i>active state</i>.
    <div class="figure">
        <img src="../imgs/read_a_word_1.svg" />
        Initial setup for reading a word.
    </div>
    Now repeat the following until the tape head is over an empty part of the tape:
    <ol>
        <li>Read the letter under the tape head. Call it \(a_i\).</li>
        <li>For each active state \(y\) (a state with a marker on it) with a transition \(y \xrightarrow{a_i} z\), remove the marker from \(y\) and place a marker on \(z\). Now \(z\) is active.</li>
        <li>Move the tape head to the right and go back to 1.</li>
    </ol>
    Let us run this algorithm on the initial setup for reading a word above.
</p>
<p>
    First, the tape head reads \(a_0\). 
    Since there is a transition \(s_1 \xrightarrow{a_0} s_2\), we remove the marker from \(s_1\) and place a marker on \(s_2\).
    We then move the tape head to the right.
    <div class="figure">
        <img src="../imgs/read_a_word_2.svg" />
    </div>
    Now the tape head reads \(a_1\).
    Since there are transitions \(s_2 \xrightarrow{a_1} s_3\) and \(s_2 \xrightarrow{a_1} s_3'\), remove the marker from \(s_2\) and place markers on \(s_3\) and \(s_3'\).
    Now move the tape head to the right.
    <div class="figure">
        <img src="../imgs/read_a_word_3.svg" />
    </div>
    The tape head reads \(a_2\).
    Since there are transitions \(s_3 \xrightarrow{a_2} s_4\) and \(s_3' \xrightarrow{a_2} s_4\), remove the markers from \(s_3\) and \(s_3'\) and place a marker on \(s_4\).
    Now move the tape head to the right...
    <div class="figure">
        <img src="../imgs/read_a_word_4.svg" />
    </div>
    ...and so on.
</p>

<div class="exercise">
    <b>(Reading Examples)</b> 
    Calculate the set \(\delta(x, w)\) where...
    <ol>
        <li>\(x = s_1\) in \(\mathcal A_1\) and \(w = a\)</li>
        <li>\(x = s_1\) in \(\mathcal A_1\) and \(w = aa\)</li>
        <li>\(x = x_0\) in \(\mathcal A_2\) and \(w = abd\)</li>
        <li>\(x = x_0\) in \(\mathcal A_2\) and \(w = ad\)</li>
        <li>\(x = x_1\) in \(\mathcal A_2\) and \(w = abd\)</li>
        <li>\(x = x_0\) in \(\mathcal A_3\) and \(w = 01\)</li>
        <li>\(x = x_1\) in \(\mathcal A_3\) and \(w = 01\)</li>
        <li>\(x = x_0\) in \(\mathcal A_3\) and \(w = 1110\)</li>
    </ol>
    <div class="figure">
        <img src="../imgs/threeautomata.svg" />
    </div>
</div>

<div class="exercise">
    <b>(The Best Tweet)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton and let \(x \in Q\).
    What is \(\delta(x, \varepsilon)\)? (Remember that \(\varepsilon\) is the empty word.)
    <div class="hint">
        Said differently, what is the result of reading \(\varepsilon\) from a state \(x\)?
    </div>
</div>

<p>
    Given two words \(w\) and \(u\) from \(A\) (\(w,u \in A^*\)), we can always form the word \(wu\) by <i>concatenating</i> them (the idea is the same as for strings in Python or Java). 
    More specifically, if \(w = a_0a_1\cdots a_{n-1}\) and \(u = b_0b_1\cdots b_{m-1}\), then 
    \[
        w u = a_0 a_1 \cdots a_{n-1} b_0 b_1 \cdots b_{m-1}
    \]
    In particular, given a letter \(a \in A\) and a word \(w \in A^*\), we can append \(a\) to the beginning or end of \(w\): at the beginning we'd get \(a w\), and at the end we'd get \(w a\).
</p>

<div class="exercise">
    If \(w = a_0 a_1 \cdots a_{n-1}\) and \(u = b_0 b_1 \cdots b_{m-1}\), then what is \(|w u|\) (the length of \(w u\))? 
    If \(a \in A\), what is \(|w a|\)?
</div>

<div class="problem">
    <b>(Repeated Derivatives)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton, let \(x \in Q\), and \(w \in A^*\) and \(a \in A\).
    Prove the following identity:
    \[
        \delta(x, w a) = \{z \mid z \in \delta(y, a) \text{ and } y \in \delta(x, w)\}
    \]
    <div class="hint">
        You are going to show two things: (1) that 
        \[
            \delta(x, w a) \subseteq \{z \mid z \in \delta(y, a) \text{ and } y \in \delta(x, w)\}
            \hspace{10em} \text{(1)}
        \]
        and (2), that 
        \[
            \delta(x, w a) \supseteq \{z \mid z \in \delta(y, a) \text{ and } y \in \delta(x, w)\}
            \hspace{10em} \text{(2)}
        \]
        The first inclusion, (1), is a matter of unfolding the definition.
        For (2), let \(w = a_0 a_1 \cdots a_{n-1}\).
        We know that \(z \in \delta(y, a)\) means that \(y \xrightarrow{a} z\).
        Conclude by writing down the definition of \(y \in \delta(x, w)\).
    </div>
</div>

<h3>Reachability</h3>

<p>
    Often, not every state of an automaton is relevant to the acceptance/rejection of a particular word by a particular state.
    Reading a word from a particular state, we may never encounter some of the states of the automaton.
</p>

<div class="definition">
    <b>(Reachable)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton, and let \(x \in Q\) be any state.
    A state \(y \in Q\) is <i>reachable from \(x\)</i> if there is a word \(w\in A^*\) such that \(y \in \delta(x, w)\).
</div>

<p>
    This is equivalen
</p>

<!--Section-->
<h2>Induction on Words</h2>

<p>
    It sounds a little silly to say out loud, but every word is composed of its letters. 
    What is meaningful about this is the following statement: every word \(w \in A^*\) is either the empty word \(\varepsilon\) or is of the form \(w a\), where \(w \in A^*\) and \(a \in A\).
    This fact can be used in <i>proofs by induction on words</i>, which is the content of the theorem below.
</p>

<div class="theorem">
    <b>(Induction on Words)</b>
    Let \(A\) be a set of input letters, and let \(L \subseteq A^*\) be a set of words from \(A\).
    Suppose that the following two statements hold:
    <ol>
        <li>the empty word is in \(L\), \(\varepsilon \in L\) </li>
        <li>for any \(w \in L\) and any \(a \in A\), \(w a \in L\)</li>
    </ol>
    Then \(L = A^*\).
</div>

<p>
    The first statement in the Induction on Words theorem is called the <i>Base Case</i> and the second statement is called the <i>Induction Step</i>.
    Induction on words is a powerful proof method in the theory of computation.
</p>

<div class="exercise">
    <b>(Who's Missing?)</b>
    Let \(A = \{0, 1\}\) and consider the following language:
    \[
        L = \{\varepsilon, 0, 1, 01, 10, 11, 00, 000, 001, 010, 100, 011, 101, 111\} \subseteq A^*
    \]
    Find the shortest word \(w \in L\) and the letter \(a \in A\) such that \(w \in L\) but \(w a \notin L\).
</div>

<div class="problem">
    <b>(Determinstic Extension)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be a <a href="../compiled/csci341_1_1_automata.html#automaton_types" target="_blank">total deterministic</a> automaton.
    Let \(x \in Q\) and \(w \in A^*\).
    Prove that \(\delta(x, w)\) has exactly one element using Induction on Words.
    <div class="hint">
        Let \(L = \{w \in A^* \mid \text{\(\delta(x, w)\) has one element}\}\).
        Show that (Base Case) \(\varepsilon \in L\), and (Induction Step) that if \(w \in L\), then \(w a \in L\) for any \(a \in A\).
        If it helps, try using the Repeated Derivatives problem.
    </div>
    
    <!--
    <ul>
        <li>
            <i>Base case:</i> In this case, \(|w| = 0\), since this is the smallest possible length. <br />
            <b>Here is what you need to do:</b> 
            Answer the question, "if \(|w| = 0\), then what is \(\delta(x, w)\)?", and give a reason for your answer.
        </li>

        <li>
            <i>Induction step:</i> In this case, we need to establish that <i>if \(\delta(x, w)\) has exactly one element and \(a \in A\), then \(\delta(x, w a)\) has exactly one element.</i> <br />
            <b>Here is what you need to do:</b> 
            Using the induction hypothesis, we know that \(\delta(x, w) = \{y\}\) for some \(y \in Q\). 
            Now compute \(\delta(x, w a)\).
            <div class="hint">
                Use the equation in the Repeated Derivatives problem.
            </div>
        </li>
    </ul> -->
</div>

<p>
    You won't often need it, but a stronger version of Induction on Words is true.
    I encourage you to use it when you find that Induction on Words is not enough.
</p>

<div class="theorem">
    <b>(Strong Induction on Words)</b>
    Let \(A\) be a set of input letters, and let \(L \subseteq A^*\) be a set of words from \(A\).
    Suppose that the following two statements are true:
    <ol>
        <li>\(\varepsilon \in L\) </li>
        <li>for any \(w \in A^*\), if \(u \in L\) for every \(u \in A^*\) such that \(|u| < |w|\), then \(w \in L\)</li>
    </ol>
    Then \(L = A^*\).
</div>

<div class="problem">
    <b>(Induction on Words 2)</b>
    Let \(A\) be a set of input letters, and let \(L \subseteq A^*\) be a set of words from \(A\).
    Prove the following statement: if
    <ol>
        <li>\(\varepsilon \in L\), and </li>
        <li>for any \(w \in L\) and any \(a \in A\), \(a w \in L\),</li>
    </ol>
    then \(L = A^*\).

    <div class="hint">
        Use Strong Induction on Words. 
        In the inductive step, you are trying to show that if \(u \in L\) whenever \(|u| < |w|\), then \(w \in L\).
        Let \(w = a_0a_1\cdots a_{n-1}\), and define the letters \(b = a_0\), \(b_{i} = a_{i+1}\) for \(i < n - 1\).
        Let \(u = b_0 b_1 \cdots b_{n-1}\).
        Then \(w = b u\) and \(|u| < |w|\). 
        Now look at assumption 2.
    </div>
</div>